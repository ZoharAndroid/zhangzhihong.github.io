---
layout: post
title: 一个工程导入Zxing二维码扫码功能实现
tags: [Android, Zxing]
categories: Android
---

如何在一个原有的工程中实现二维码扫码功能呢？那么[Zxing](https://github.com/zxing/zxing)这个库你就必须得用上了，大部分二维码扫码都是使用的Zxing这个库，所以，我在自己的原有工程的基础上，使用Zxing来实现二维码扫码功能。

ZXing ("Zebra Crossing") 是Java和Android的二维码扫码库。可以支持多种扫码图片（1D/2D）。Github地址为：[Zxing的Github地址](https://github.com/zxing/zxing)。

下面主要来讲下如何来在自己的原有项目中去集成Zxing库。



# 下载zxing源代码

下载地址为：[Zxing源代码下载](https://github.com/zxing/zxing/releases)。选择其中一个压缩格式下载即可。这里我选择的是zip格式的(tar.gz一般都是Linux系统使用的，不过Windows下系统有些压缩软件也是可以解压的)。

![]()

然后对下载下来的源代码压缩包`Zxing3.4.0`进行解压，解压后的文件如下图所示。

![]()

这里主要关注的是与`android`有关的。

# 加入zxing依赖

打开`Module:app`的`build.gralde`文件，然后添加zxing依赖`implementation 'com.google.zxing:core:3.4.0'`。如下图所示。

![]()


# 复制Zxing的android到工程目录中

打开zxing源代码，然后一直打开到`\zxing-zxing-3.4.0\android\src\com`目录，然后右键复制，如下图所示。

![]()

打开自己的工程目录直到`java/`目录下，然后将复制的`com/`目录下的代码添加到这个目录下，如下图所示。

![]()

复制后，可以查看Android Studio的工程名目录如下图。

![]()

# 向AndroidManifest.xml添加代码

打开zxing源文件代码目录`\zxing-zxing-3.4.0\android`，然后打开`AndroidManifest.xml`文件。

![]()

## 添加权限

复制`AndroidManifest.xml`中的权限代码到自己的工程的`AndroidManifest.xml`中，复制的权限代码如下：

```xml
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.FLASHLIGHT"/>
    <!-- unavailable in API 23 -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>


    <uses-feature android:name="android.hardware.camera.any"/>
    <uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>
    <uses-feature android:name="android.hardware.camera.flash" android:required="false"/>
    <uses-feature android:name="android.hardware.screen.landscape"/>
    <uses-feature android:name="android.hardware.wifi" android:required="false"/>
```

复制后的自己工程中的`AndroidManifest.xml`文件如下图所示：

![]()

## 添加activity等代码

